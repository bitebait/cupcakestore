<script>
    const fileInputElement = document.getElementById('image');
    const statusLabel = document.getElementById('imageLabel');
    const imagePreview = document.getElementById('previewImage');

    const MAX_FILE_SIZE_MB = 2;
    const MAX_FILE_SIZE_BYTES = 1024 * 1024 * MAX_FILE_SIZE_MB;
    const PLACEHOLDER_IMAGE_SRC = "/images/placeholder.jpg";

    function updateStatusLabel(color, message) {
        statusLabel.style.color = color;
        statusLabel.innerHTML = message;
    }

    function resetInputAndPreview() {
        fileInputElement.value = '';
        imagePreview.src = PLACEHOLDER_IMAGE_SRC;
    }

    function loadImagePreview(file) {
        const reader = new FileReader();
        reader.onload = function (e) {
            imagePreview.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function handleFileChange(event) {
        const file = fileInputElement.files[0];

        if (file.size > MAX_FILE_SIZE_BYTES) {
            resetInputAndPreview();
            updateStatusLabel("red", `Por favor, selecione um arquivo de at√© ${MAX_FILE_SIZE_MB}MB.`);
        } else {
            updateStatusLabel("green", 'Arquivo carregado com sucesso!');
            loadImagePreview(file);
        }
    }

    fileInputElement.addEventListener('change', handleFileChange);
</script>